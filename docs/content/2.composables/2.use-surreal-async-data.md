---
title: 'useSurrealAsyncData'
icon: 'i-lucide-loader'
description: 'SSR-safe async data fetching with the SurrealDB client.'
---

# useSurrealAsyncData

A low-level composable that wraps Nuxt's `useAsyncData` with automatic SurrealDB client connection. All other SSR-safe composables (`useSurrealQuery`, `useSurrealSelect`, etc.) are built on top of this.

## Usage

```vue [app/pages/index.vue]
<script setup lang="ts">
const { data, pending, error, refresh } = await useSurrealAsyncData(
  'my-key',
  (client) => {
    return client.query('SELECT * FROM products;').json().collect(0)
  },
)
</script>
```

## Arguments

| Argument | Type | Description |
|----------|------|-------------|
| `key` | `string` | A unique key for `useAsyncData` caching |
| `cb` | `(client: Surreal) => MaybePromise<T>` | Callback receiving the connected client |
| `asyncDataOptions?` | `AsyncDataOptions` | Standard Nuxt `useAsyncData` options |

## Return type

Returns the same shape as `useAsyncData`:

```ts
{
  data: Ref<T | undefined>
  pending: Ref<boolean>
  error: Ref<Error | undefined>
  status: Ref<'idle' | 'pending' | 'success' | 'error'>
  refresh: () => Promise<void>
  execute: () => Promise<void>
  clear: () => void
}
```
